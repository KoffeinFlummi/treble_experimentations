From 0a1abdb94420d1db499a9ca4c4b3cfa4bce56240 Mon Sep 17 00:00:00 2001
From: KoffeinFlummi <koffeinflummi@protonmail.com>
Date: Mon, 1 Oct 2018 21:06:04 +0200
Subject: [PATCH 3/5] Revert "Get back to allowing "rild" universally"

This reverts commit b544b15e6864b2f310b7cea507e67d46991bd543.
---
 base.mk              | 1 -
 sepolicy/qualcomm.te | 5 +++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/base.mk b/base.mk
index 2f89f2c..57b75c5 100644
--- a/base.mk
+++ b/base.mk
@@ -92,4 +92,3 @@ PRODUCT_COPY_FILES += \
 	device/phh/treble/files/samsung-sec_touchscreen.kl:system/phh/samsung-sec_touchscreen.kl \
 	device/phh/treble/files/oneplus6-synaptics_s3320.kl:system/phh/oneplus6-synaptics_s3320.kl \
 
-SELINUX_IGNORE_NEVERALLOWS := true
diff --git a/sepolicy/qualcomm.te b/sepolicy/qualcomm.te
index dcdf462..9774d76 100644
--- a/sepolicy/qualcomm.te
+++ b/sepolicy/qualcomm.te
@@ -1,8 +1,9 @@
-type rild, domain;
+attribute rild_26_0;
+attribute rild_27_0;
 
 #me.phh.treble.qti.audio is system-signed
 allow system_app hal_telephony_hwservice:hwservice_manager { find };
-allow { rild system_app } { rild system_app }:binder { call transfer };
+allow { rild_26_0 rild_27_0 system_app } { rild_26_0 rild_27_0 system_app }:binder { call transfer };
 
 #Pixel 1
 type vnd_qcril_audio_hwservice, hwservice_manager_type;
-- 
2.19.0

